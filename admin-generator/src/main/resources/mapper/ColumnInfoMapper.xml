<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.utility.mapper.ColumnInfoMapper">

    <select id="selectListTables" resultType="org.utility.model.vo.TableInfo">
        SELECT
            table_name, create_time, engine, table_collation, table_comment
        FROM
            information_schema.tables
        WHERE
            table_schema = (SELECT database())
        ORDER BY
            create_time DESC
    </select>

    <select id="selectPageTables" resultType="org.utility.model.vo.TableInfo">
        SELECT
            table_name, create_time, engine, table_collation, table_comment
        FROM
            information_schema.tables
        WHERE
            table_schema = (SELECT database())
        AND table_name LIKE #{tableName}
        ORDER BY
            create_time DESC
    </select>

    <select id="selectByTableName" resultType="org.utility.model.ColumnInfo">
        SELECT
            '${tableName}' AS table_name,
            column_name,
            if(is_nullable='NO', true, false) AS not_null,
            data_type AS column_type,
            column_comment AS remark,
            column_key AS key_type,
            extra
        FROM
            information_schema.columns
        WHERE
            table_name = #{tableName}
        AND table_schema = (SELECT database())
        ORDER BY
            ordinal_position
    </select>
</mapper>
